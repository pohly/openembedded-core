rm_work enhancements

This is the OE-core side of the rm_work.bbclass enhancements. Depends
on the corresponding bitbake patch series. See the OE-core "rm_work +
pybootchart enhancements" mail thread for further information.

Changes since v1:
  - now based on the (tenative!) bb.event.RecipeTaskPreProcess instead
    of prioritized anonymous functions
  - no need to change the scheduler, the "completion" scheduler now
    has the enhanced implementation
